<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet Integration</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@metamask/detect-provider/dist/detect-provider.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
</head>
<body>

<h1>Connect your Wallet</h1>
<button id="connectButton">Connect MetaMask</button>
<button id="claimAirdropButton" disabled>Claim Airdrop (ETH)</button>
<button id="connectTrustwalletButton">Connect TrustWallet</button>
<button id="claimTrustwalletAirdropButton" disabled>Claim Airdrop (BSC)</button>

<script>
    // Function to detect wallet type
    function detectWallet() {
        if (window.ethereum) {
            if (window.ethereum.isMetaMask) {
                console.log("MetaMask detected");
                return 'metamask';
            } else {
                console.log("TrustWallet detected");
                return 'trustwallet';
            }
        } else {
            console.log("No wallet detected");
            return null;
        }
    }

    // MetaMask Connection
    async function connectMetaMask() {
        if (window.ethereum && window.ethereum.isMetaMask) {
            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                console.log("MetaMask connected:", accounts[0]);
                document.getElementById('claimAirdropButton').disabled = false;
                alert(`Connected to MetaMask: ${accounts[0]}`);
            } catch (error) {
                console.error("MetaMask connection failed:", error);
                alert("Failed to connect to MetaMask.");
            }
        } else {
            alert("MetaMask not found. Please install MetaMask.");
        }
    }

    // TrustWallet Connection
    async function connectTrustWallet() {
        if (window.ethereum && !window.ethereum.isMetaMask) {
            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                console.log("TrustWallet connected:", accounts[0]);
                document.getElementById('claimTrustwalletAirdropButton').disabled = false;
                alert(`Connected to TrustWallet: ${accounts[0]}`);
            } catch (error) {
                console.error("TrustWallet connection failed:", error);
                alert("Failed to connect to TrustWallet.");
            }
        } else {
            alert("TrustWallet not found. Please ensure it is installed and active.");
        }
    }

    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
        // MetaMask Connect Button
        document.getElementById('connectButton').addEventListener('click', connectMetaMask);

        // TrustWallet Connect Button
        document.getElementById('connectTrustwalletButton').addEventListener('click', connectTrustWallet);

        // Claim Airdrop for MetaMask
        document.getElementById('claimAirdropButton').addEventListener('click', () => {
            alert("Claiming airdrop for MetaMask...");
            // Add claim logic here
        });

        // Claim Airdrop for TrustWallet
        document.getElementById('claimTrustwalletAirdropButton').addEventListener('click', () => {
            alert("Claiming airdrop for TrustWallet...");
            // Add claim logic here
        });
    });
</script>

</body>
</html>

